Microsoft (R) Macro Assembler Version 10.00.30319.01	    07/08/11 23:14:43
C:\Projects\REVIVAL\FDS\FILLERS\BIHI.ASM		     Page 1 - 1


				.386p
 00000000			_DATA	SEGMENT DWORD PUBLIC 'DATA'
				align 4
 00000000 00000000		Left_Section         	dd 0
 00000004 00000000		Right_Section 	     	dd 0
 00000008 00000000		Left_Section_Height  	dd 0
 0000000C 00000000		Right_Section_Height 	dd 0
 00000010 00000000		Left_U 		     	dd 0.0 ; float
 00000014 00000000		Delta_left_U 	     	dd 0.0 ; float
 00000018 00000000		Left_V 		     	dd 0.0 ; float
 0000001C 00000000		Delta_left_V 	     	dd 0.0 ; float
 00000020 00000000		Left_Z                  dd 0.0 ; float
 00000024 00000000		Delta_left_Z            dd 0.0 ; float
 00000028 00000000		Right_Z                 dd 0.0 ; float
 0000002C 00000000		Delta_right_Z           dd 0.0 ; float
 00000030 00000000		Right_U                 dd 0.0 ; float
 00000034 00000000		Delta_right_U           dd 0.0 ; float
 00000038 00000000		Right_V                 dd 0.0 ; float
 0000003C 00000000		Delta_right_V           dd 0.0 ; float
 00000040 00000000		RevHeight               dd 0.0 ; float
 00000044 00000000		RevWidth                dd 0.0 ; float
 00000048 00000000		u0                      dd 0
 0000004C 00000000		v0                      dd 0
 00000050 00000000		u1                      dd 0
 00000054 00000000		v1                      dd 0
 00000058 00000000		du		      	dd 0
 0000005C 00000000		dv                      dd 0
 00000060 00000000		XWidth			dd 0
 00000064 00000000		Height			dd 0
 00000068 00000000		Longest			dd 0
 0000006C  00000003 [		Left_Array              dd 3 dup(0)
	    00000000
	   ]
 00000078  00000003 [		RIght_Array             dd 3 dup(0)
	    00000000
	   ]
 00000084 00000000		Left_X 			dd 0
 00000088 00000000		Delta_Left_X 		dd 0
 0000008C 00000000		Right_X 		dd 0
 00000090 00000000		Delta_Right_X 		dd 0
 00000094 00000000		BitMap                  dd 0
 00000098 00000000		Where                   dd 0
 0000009C 00000000		Top                     dd 0
 000000A0 00000000		Middle                  dd 0
 000000A4 00000000		Bottom                  dd 0
 000000A8 00000000		ScanLine		dd 0
 000000AC 00000000		TEBP			dd 0
 = 00000000			Vertex_X  equ 0
 = 00000004			Vertex_Y  equ 4
 = 00000008			Vertex_Z  equ 8
 = 0000000C			Vertex_U  equ 12
 = 00000010			Vertex_V  equ 16
 000000B0 3F800000		One       dd  1.0
 000000B4 41800000		Sixteen   dd  16.0
 000000B8 43800000		Sixtyfive dd  256.0
 000000BC 0000057D		_P_Texture_16_Size	dd	ASM_FILE_END - _P_Texture_16_
				align 1
 00C0				_DATA	ENDS

 00000000			_TEXT	SEGMENT BYTE PUBLIC 'CODE'
					ASSUME	cs:_TEXT, ds:_DATA

					PUBLIC _P_Texture_16_Size

					PUBLIC	_P_Texture_16_
 00000000			_P_Texture_16_:
 00000000  89 2D 000000AC R	mov [TEBP],ebp

				;vtx in ebx , bitmap in eax , where in ecx

 00000006  A3 00000094 R	mov [BitMap],eax
 0000000B  89 0D 00000098 R	mov [Where],ecx

 00000011  8B CB		mov ecx,ebx
 00000013  8B F3		mov esi,ebx
 00000015  8B FB		mov edi,ebx
 00000017  83 C6 14		add esi,20
 0000001A  83 C7 28		add edi,40

				;ecx - vertex 1
				;esi - vertex 2
				;edi - vertex 3

 0000001D  8B 41 04		mov eax,[ecx+Vertex_Y]
 00000020  3B 46 04		cmp eax,[esi+Vertex_Y]
 00000023  7E 02		jle @@sort1
 00000025  87 CE		xchg ecx,esi
 00000027			@@sort1:
 00000027  8B 41 04		mov eax,[ecx+Vertex_Y]
 0000002A  3B 47 04		cmp eax,[edi+Vertex_Y]
 0000002D  7E 02		jle @@sort2
 0000002F  87 CF		xchg ecx,edi
 00000031			@@sort2:
 00000031  8B 46 04		mov eax,[esi+Vertex_Y]
 00000034  3B 47 04		cmp eax,[edi+Vertex_Y]
 00000037  7E 02		jle @@sort3
 00000039  87 F7		xchg esi,edi
 0000003B			@@sort3:

 0000003B  8B 5F 04		mov ebx,[edi+Vertex_Y]
 0000003E  2B 59 04		sub ebx,[ecx+Vertex_Y]
 00000041  0F 84 000003FD	jz TextureEnd

				;    int temp = ((v2->y - v1->y) << 16) / height;
				;    int longest = temp * (v3->x - v1->x) + ((v1->x - v2->x) << 16);
				;eax-longest

 00000047  8B 46 04		mov eax,[esi+Vertex_Y]
 0000004A  8B 29		mov ebp,[ecx+Vertex_X]
 0000004C  2B 41 04		sub eax,[ecx+Vertex_Y]
 0000004F  2B 2E		sub ebp,[esi+Vertex_X]
 00000051  C1 E0 10		sal eax,16
 00000054  C1 E5 10		sal ebp,16
 00000057  8B D0		mov edx,eax
 00000059  C1 FA 1F		sar edx,31
 0000005C  F7 FB		idiv ebx
 0000005E  8B 1F		mov ebx,[edi+Vertex_X]
 00000060  2B 19		sub ebx,[ecx+Vertex_X]
 00000062  F7 EB		imul ebx
 00000064  03 C5		add eax,ebp
 00000066  A3 00000068 R	mov [Longest],eax
 0000006B  0F 84 000003D3	jz TextureEnd
 00000071  7D 7D		jge LongestOverZero


 00000073  89 0D 0000009C R	mov [Top],ecx
 00000079  8B E9		mov ebp,ecx
 0000007B  89 35 000000A0 R	mov [Middle],esi
 00000081  89 3D 000000A4 R	mov [Bottom],edi
 00000087  89 3D 00000078 R	mov [Right_Array],edi
 0000008D  89 35 0000007C R	mov [Right_Array+4],esi
 00000093  89 0D 00000080 R	mov [Right_Array+8],ecx
 00000099  C7 05 00000004 R	mov [Right_Section],2
	   00000002

 000000A3  89 3D 0000006C R	mov [Left_Array],edi
 000000A9  89 0D 00000070 R	mov [Left_Array+4],ecx
 000000AF  C7 05 00000000 R	mov [Left_Section],1
	   00000001

 000000B9  E8 0000038D		call CalcLeftSection
 000000BE  83 FB 00		cmp ebx,0
 000000C1  0F 8E 0000037D	jle TextureEnd

 000000C7  E8 00000418		call CalcRightSection
 000000CC  83 FB 00		cmp ebx,0
 000000CF  0F 8F 00000092	jg FLSNZ  ; First Right Section Is Not Zero
 000000D5  A1 00000004 R	mov eax,[Right_Section]
 000000DA  48			dec eax
 000000DB  A3 00000004 R	mov [Right_Section],eax
 000000E0  E8 000003FF		call CalcRightSection
 000000E5  83 FB 00		cmp ebx,0
 000000E8  0F 8E 00000356	jle TextureEnd
 000000EE  EB 77		jmp FLSNZ

 000000F0			LongestOverZero:
 000000F0  89 0D 0000009C R	mov [Top],ecx
 000000F6  8B E9		mov ebp,ecx
 000000F8  89 35 000000A0 R	mov [Middle],esi
 000000FE  89 3D 000000A4 R	mov [Bottom],edi
 00000104  89 3D 0000006C R	mov [Left_Array],edi
 0000010A  89 35 00000070 R	mov [Left_Array+4],esi
 00000110  89 0D 00000074 R	mov [Left_Array+8],ecx
 00000116  C7 05 00000000 R	mov [Left_Section],2
	   00000002

 00000120  89 3D 00000078 R	mov [Right_Array],edi
 00000126  89 0D 0000007C R	mov [Right_Array+4],ecx
 0000012C  C7 05 00000004 R	mov [Right_Section],1
	   00000001

 00000136  E8 000003A9		call CalcRightSection
 0000013B  83 FB 00		cmp ebx,0
 0000013E  0F 8E 00000300	jle TextureEnd

 00000144  E8 00000302		call CalcLeftSection
 00000149  83 FB 00		cmp ebx,0
 0000014C  7F 19		jg FLSNZ  ; First Left Section Is Not Zero
 0000014E  A1 00000000 R	mov eax,[Left_Section]
 00000153  48			dec eax
 00000154  A3 00000000 R	mov [Left_Section],eax
 00000159  E8 000002ED		call CalcLeftSection
 0000015E  83 FB 00		cmp ebx,0
 00000161  0F 8E 000002DD	jle TextureEnd
 00000167			FLSNZ:

 00000167  8B 7D 04		mov edi,[ebp+vertex_y]
 0000016A  8B D7		mov edx,edi
 0000016C  C1 E7 07		sal edi,7
 0000016F  C1 E2 09		sal edx,9
 00000172  03 3D 00000098 R	add edi,[Where]
 00000178  03 FA		add edi,edx
 0000017A  89 3D 000000A8 R	mov [ScanLine],edi

 00000180			OuterLoop:
				;Inner Loop Start Here
 00000180  A1 00000084 R	mov eax,[Left_X]
 00000185  8B 2D 0000008C R	mov ebp,[Right_X]
 0000018B  C1 F8 10		sar eax,16
 0000018E  8B 3D 000000A8 R	mov edi,[ScanLine]
 00000194  C1 FD 10		sar ebp,16
 00000197  2B E8		sub ebp,eax
 00000199  0F 8E 0000019A	jle UpdateValues
 0000019F  D9 05 000000B4 R	FLD dword ptr [Sixteen]
 000001A5  89 2D 00000060 R	mov [XWidth],ebp
 000001AB  DB 05 00000060 R	FILD dword ptr [XWidth]
 000001B1  DE F9		FDIV                ;ST(6) - 1.0/Width
 000001B3  D9 05 00000020 R	FLD dword ptr [Left_Z]   ;ST(5)
 000001B9  D9 05 00000010 R	FLD dword ptr [Left_U]   ;ST(4)
 000001BF  D9 05 00000018 R	FLD dword ptr [Left_V]   ;ST(3)
 000001C5  D9 05 00000028 R	FLD dword ptr [Right_Z]  ;ST(2)
 000001CB  D9 05 00000030 R	FLD dword ptr [Right_U]  ;ST(1)
 000001D1  D9 05 00000038 R	FLD dword ptr [Right_V]  ;ST(0)
 000001D7  D8 E3		FSUB ST(0),ST(3) ;ST(1) = Delta V
 000001D9  D9 C9		FXCH ST(1)
 000001DB  D8 E4		FSUB ST(0),ST(4) ;ST(2) = Delta U
 000001DD  D9 CA		FXCH ST(2)
 000001DF  D8 E5		FSUB ST(0),ST(5) ;ST(0) = Delta Z
 000001E1  D8 CE		FMUL ST(0),ST(6)
 000001E3  D9 CA		FXCH ST(2)
 000001E5  D8 CE		FMUL ST(0),ST(6)
 000001E7  D9 C9		FXCH ST(1)
 000001E9  D8 CE		FMUL ST(0),ST(6)
 000001EB  DD C6		FFREE ST(6)
 000001ED  8D 3C 47		lea edi,[edi+eax*2]
 000001F0  D9 05 000000B0 R	FLD One
 000001F6  D8 F6		FDIV ST(0),ST(6)
 000001F8  8A 0F		mov cl,[Edi]
 000001FA  D8 0D 000000B8 R	FMUL dword ptr [SixtyFive]
 00000200  D9 C0		FLD ST(0)
 00000202  D8 CE		FMUL ST(0),ST(6)
 00000204  DB 1D 00000048 R	FISTP dword ptr [u0]
 0000020A  D8 CC		FMUL ST(0),ST(4)
 0000020C  DB 1D 0000004C R	FISTP dword ptr [v0]

				;Left Z   ST(5)
				;Left U   ST(4)
				;Left V   ST(3)
				;Delta Z  ST(2)
				;Delta U  ST(1)
				;Delta V  ST(0)

 00000212  D9 CB		FXCH ST(3)  ;ST(0) = V    ST(3) = Delta V
 00000214  D8 C3		FADD ST(0),ST(3)
 00000216  D9 C9		FXCH ST(1)  ;ST(0) = Delta U    ST(1) = V
 00000218  D9 CC		FXCH ST(4)  ;ST(0) = U    ST(4) = Delta U
 0000021A  D8 C4		FADD ST(0),ST(4)
 0000021C  D9 CA		FXCH ST(2)  ;ST(0) = Delta Z    ST(2) = U
 0000021E  D9 CD		FXCH ST(5)  ;ST(0) = Z    ST(5) = Delta Z
 00000220  D8 C5		FADD ST(0),ST(5)

				;Delta Z  ST(5)
				;Delta U  ST(4)
				;Delta V  ST(3)
				;Left U   ST(2)
				;Left V   ST(1)
				;Left Z   ST(0)
 00000222  BB 00000000		mov ebx,0
 00000227  8B 0D 00000048 R	mov ecx,[u0]
 0000022D  8B 15 0000004C R	mov edx,[v0]
 00000233  8A DD		mov   bl, ch
 00000235  8A FE		mov   bh, dh
 00000237  8B 0D 00000094 R	mov ecx,[BitMap]

 0000023D  D9 05 000000B0 R	FLD dword ptr [One]
 00000243  D8 F1		FDIV ST(0),ST(1)
 00000245  8A 0C 59		mov cl,[ecx+ebx*2]

 00000248  D8 0D 000000B8 R	FMUL dword ptr [SixtyFive]
 0000024E  D9 C0		FLD ST(0)
 00000250  D8 CC		FMUL ST(0),ST(4)
 00000252  DB 1D 00000050 R	FISTP dword ptr [u1]
 00000258  D8 CA		FMUL ST(0),ST(2)
 0000025A  DB 1D 00000054 R	FISTP dword ptr [v1]


 00000260			InnerOuterLoop:

				;Delta Z  ST(5)
				;Delta U  ST(4)
				;Delta V  ST(3)
				;Left U   ST(2)
				;Left V   ST(1)
				;Left Z   ST(0)

 00000260  D8 C5		FADD ST(0),ST(5)
 00000262  D9 C9		FXCH ST(1)
 00000264  D8 C3		FADD ST(0),ST(3)
 00000266  D9 CA		FXCH ST(2)
 00000268  D8 C4		FADD ST(0),ST(4)
 0000026A  D9 CA		FXCH ST(2)
 0000026C  D9 C9		FXCH ST(1)
 0000026E  D9 05 000000B0 R	FLD dword ptr [One]
 00000274  D8 F1		FDIV ST(0),ST(1)
 00000276  8B 35 00000050 R	mov esi,[u1]
 0000027C  8B 15 00000054 R	mov edx,[v1]
 00000282  2B 35 00000048 R	sub esi,[u0]
 00000288  2B 15 0000004C R	sub edx,[v0]
 0000028E  C1 FE 04		sar esi,4
 00000291  A1 00000060 R	mov eax,[Xwidth]
 00000296  C1 FA 04		sar edx,4
 00000299  8B E8		mov ebp,eax
 0000029B  83 E8 10		sub eax,16
 0000029E  83 FD 10		cmp ebp,16
 000002A1  7E 05		jle @@NoOver16
 000002A3  BD 00000010		mov ebp,16
 000002A8			@@NoOver16:
 000002A8  89 15 0000005C R	mov [dv],edx
 000002AE  89 35 00000058 R	mov [du],esi
 000002B4  BB 00000000		mov ebx,0
 000002B9  8B 35 00000094 R	mov esi,[BitMap]
 000002BF  A3 00000060 R	mov [Xwidth],eax
 000002C4  8B 0D 00000048 R	mov ecx,[u0]
 000002CA  8B 15 0000004C R	mov edx,[v0]
				;sar ecx,8
				;sar edx,8
 000002D0  8A DD		mov   bl, ch
 000002D2  8A FE		mov   bh, dh



 000002D4			 @@InnerLoop:
 000002D4  03 15 0000005C R	    add   edx, [dv]                 ; update v
 000002DA  03 0D 00000058 R	    add   ecx, [du]                 ; update u
 000002E0  66| 8B 04 5E		    mov   ax, [esi+ebx*2]                 ; get pixel from aligned texture map
 000002E4  8A DD		    mov   bl, ch
 000002E6  66| 89 07		    mov   [edi], ax                 ; plot pixel
 000002E9  8A FE		    mov   bh, dh
 000002EB  83 C7 02		    add   edi,2
 000002EE  4D			    dec   ebp
 000002EF  75 E3		    jnz   @@InnerLoop

 000002F1  A1 00000050 R	mov eax,[u1]
 000002F6  8B 0D 00000054 R	mov ecx,[v1]
 000002FC  A3 00000048 R	mov [u0],eax
 00000301  89 0D 0000004C R	mov [v0],ecx

 00000307  D8 0D 000000B8 R	FMUL dword ptr [SixtyFive]
 0000030D  A1 00000060 R	mov eax,[XWidth]
 00000312  D9 C0		FLD ST(0)
 00000314  D8 CC		FMUL ST(0),ST(4)
 00000316  DB 1D 00000050 R	FISTP dword ptr [u1]
 0000031C  D8 CA		FMUL ST(0),ST(2)
 0000031E  DB 1D 00000054 R	FISTP dword ptr [v1]

 00000324  83 F8 00		cmp eax,0
 00000327  0F 8F FFFFFF33	jg InnerOuterLoop
 0000032D  DD C0		FFREE ST(0)
 0000032F  DD C1		FFREE ST(1)
 00000331  DD C2		FFREE ST(2)
 00000333  DD C3		FFREE ST(3)
 00000335  DD C4		FFREE ST(4)
 00000337  DD C5		FFREE ST(5)

				;Inner Loop End Here

 00000339			UpdateValues:
 00000339  A1 000000A8 R	mov eax,[ScanLine]
 0000033E  8B 1D 00000008 R	mov ebx,[Left_Section_Height]
 00000344  05 00000280		add eax,640
 00000349  4B			dec ebx
 0000034A  A3 000000A8 R	mov [ScanLine],eax
 0000034F  89 1D 00000008 R	mov [Left_Section_Height],ebx
 00000355  7F 23		jg @@Update_Left_UVXZ
 00000357  8B 1D 00000000 R	mov ebx,[Left_Section]
 0000035D  4B			dec ebx
 0000035E  0F 8E 000000E0	jle TextureEnd
 00000364  89 1D 00000000 R	mov [Left_Section],ebx
 0000036A  E8 000000DC		call CalcLeftSection
 0000036F  83 FB 00		cmp ebx,0
 00000372  0F 8E 000000CC	jle TextureEnd
 00000378  EB 4C		jmp RightSectionCheck
 0000037A			@@Update_Left_UVXZ:
 0000037A  D9 05 00000010 R	FLD dword ptr [Left_U]
 00000380  D9 05 00000018 R	FLD dword ptr [Left_V]
 00000386  D9 C9		FXCH ST(1)
 00000388  D8 05 00000014 R	FADD dword ptr [Delta_Left_U]
 0000038E  D9 C9		FXCH ST(1)
 00000390  D8 05 0000001C R	FADD [Delta_Left_V]
 00000396  D9 C9		FXCH ST(1)
 00000398  D9 1D 00000010 R	FSTP dword ptr [Left_U]
 0000039E  D9 1D 00000018 R	FSTP dword ptr [Left_V]

 000003A4  D9 05 00000020 R	FLD dword ptr [Left_Z]
 000003AA  A1 00000084 R	mov eax,[Left_X]
 000003AF  D8 05 00000024 R	FADD dword ptr [Delta_Left_Z]
 000003B5  03 05 00000088 R	add eax,[Delta_Left_X]
 000003BB  D9 1D 00000020 R	FSTP dword ptr [Left_Z]
 000003C1  A3 00000084 R	mov [Left_X],eax

 000003C6			RightSectionCheck:
 000003C6  8B 1D 0000000C R	mov ebx,[Right_Section_Height]
 000003CC  4B			dec ebx
 000003CD  89 1D 0000000C R	mov [Right_Section_Height],ebx
 000003D3  7F 1E		jg @@Update_Right_UVXZ
 000003D5  8B 1D 00000004 R	mov ebx,[Right_Section]
 000003DB  4B			dec ebx
 000003DC  7E 66		jle TextureEnd
 000003DE  89 1D 00000004 R	mov [Right_Section],ebx
 000003E4  E8 000000FB		call CalcRightSection
 000003E9  83 FB 00		cmp ebx,0
 000003EC  7E 56		jle TextureEnd
 000003EE  E9 FFFFFD8D		jmp OuterLoop

 000003F3			@@Update_Right_UVXZ:
 000003F3  D9 05 00000030 R	FLD dword ptr [Right_U]
 000003F9  D9 05 00000038 R	FLD dword ptr [Right_V]
 000003FF  D9 C9		FXCH ST(1)
 00000401  D8 05 00000034 R	FADD dword ptr [Delta_Right_U]
 00000407  D9 C9		FXCH ST(1)
 00000409  D8 05 0000003C R	FADD [Delta_Right_V]
 0000040F  D9 C9		FXCH ST(1)
 00000411  D9 1D 00000030 R	FSTP dword ptr [Right_U]
 00000417  D9 1D 00000038 R	FSTP dword ptr [Right_V]

 0000041D  D9 05 00000028 R	FLD dword ptr [Right_Z]
 00000423  A1 0000008C R	mov eax,[Right_X]
 00000428  D8 05 0000002C R	FADD dword ptr [Delta_Right_Z]
 0000042E  03 05 00000090 R	add eax,[Delta_Right_X]
 00000434  D9 1D 00000028 R	FSTP dword ptr [Right_Z]
 0000043A  A3 0000008C R	mov [Right_X],eax

 0000043F  E9 FFFFFD3C		jmp OuterLoop

 00000444			TextureEnd:
 00000444  8B 2D 000000AC R	mov ebp,[Tebp]
 0000044A  C3			ret

 0000044B			CalcLeftSection proc near

 0000044B  A1 00000000 R	mov eax,[Left_Section]
 00000450  8B 0C 85		mov ecx,[Left_Array+eax*4]
	   0000006C R
 00000457  83 E8 01		sub eax,1
 0000045A  8B 34 85		mov esi,[Left_Array+eax*4]
	   0000006C R
 00000461  8B 5E 04		mov ebx,[esi+Vertex_Y]
 00000464  2B 59 04		sub ebx,[ecx+Vertex_Y]
 00000467  74 74		jz @@CLSend
 00000469  89 1D 00000064 R	mov [Height],ebx
 0000046F  8B 11		mov edx,[ecx+Vertex_X]
 00000471  DB 05 00000064 R	FILD dword ptr [Height]
 00000477  C1 E2 10		sal edx,16
 0000047A  8B 06		mov eax,[esi+Vertex_X]
 0000047C  2B 01		sub eax,[ecx+Vertex_X]
 0000047E  D9 05 000000B0 R	FLD dword ptr [One]
 00000484  C1 E0 10		sal eax,16
 00000487  89 15 00000084 Rmov [left_x],edx
 0000048D  8B D0		mov edx,eax
 0000048F  DE F1		FDIVR
 00000491  C1 FA 1F		sar edx,31
 00000494  F7 FB		idiv ebx
 00000496  D9 46 08		FLD dword ptr [esi+Vertex_Z]
 00000499  A3 00000088 R	mov [Delta_Left_X],eax
 0000049E  D9 41 08		FLD dword ptr [ecx+Vertex_Z]
 000004A1  D9 15 00000020 R	FST [Left_Z]
 000004A7  DE E9		FSUB
 000004A9  D8 C9		FMUL ST,ST(1)
 000004AB  D9 1D 00000024 R	FSTP dword ptr [Delta_Left_Z]

 000004B1  D9 46 0C		FLD dword ptr [esi+Vertex_U]
 000004B4  D9 41 0C		FLD dword ptr [ecx+Vertex_U]
 000004B7  D9 15 00000010 R	FST [Left_U]
 000004BD  DE E9		FSUB
 000004BF  D8 C9		FMUL ST,ST(1)
 000004C1  D9 1D 00000014 R	FSTP dword ptr [Delta_Left_U]

 000004C7  D9 46 10		FLD dword ptr [esi+Vertex_V]
 000004CA  D9 41 10		FLD dword ptr [ecx+Vertex_V]
 000004CD  D9 15 00000018 R	FST [Left_V]
 000004D3  DE E9		FSUB
 000004D5  DE C9		FMUL
 000004D7  D9 1D 0000001C R	FSTP dword ptr [Delta_Left_V]
 000004DD			@@CLSend:
 000004DD  89 1D 00000008 R	mov [Left_Section_Height],ebx
 000004E3  C3			  ret
 000004E4			CalcLeftSection endp



 000004E4			CalcRightSection proc near

 000004E4  A1 00000004 R	mov eax,[Right_Section]
 000004E9  8B 0C 85		mov ecx,[Right_Array+eax*4]
	   00000078 R
 000004F0  83 E8 01		sub eax,1
 000004F3  8B 34 85		mov esi,[Right_Array+eax*4]
	   00000078 R
 000004FA  8B 5E 04		mov ebx,[esi+Vertex_Y]
 000004FD  2B 59 04		sub ebx,[ecx+Vertex_Y]
 00000500  74 74		jz @@CRSend
 00000502  89 1D 00000064 R	mov [Height],ebx
 00000508  8B 11		mov edx,[ecx+Vertex_X]
 0000050A  DB 05 00000064 R	FILD dword ptr [Height]
 00000510  C1 E2 10		sal edx,16
 00000513  8B 06		mov eax,[esi+Vertex_X]
 00000515  2B 01		sub eax,[ecx+Vertex_X]
 00000517  D9 05 000000B0 R	FLD dword ptr [One]
 0000051D  C1 E0 10		sal eax,16
 00000520  89 15 0000008C R	mov [Right_X],edx
 00000526  8B D0		mov edx,eax
 00000528  DE F1		FDIVR
 0000052A  C1 FA 1F		sar edx,31
 0000052D  F7 FB		idiv ebx
 0000052F  D9 46 08		FLD dword ptr [esi+Vertex_Z]
 00000532  A3 00000090 R	mov [Delta_Right_X],eax
 00000537  D9 41 08		FLD dword ptr [ecx+Vertex_Z]
 0000053A  D9 15 00000028 R	FST [Right_Z]
 00000540  DE E9		FSUB
 00000542  D8 C9		FMUL ST,ST(1)
 00000544  D9 1D 0000002C R	FSTP dword ptr [Delta_Right_Z]

 0000054A  D9 46 0C		FLD dword ptr [esi+Vertex_U]
 0000054D  D9 41 0C		FLD dword ptr [ecx+Vertex_U]
 00000550  D9 15 00000030 R	FST [Right_U]
 00000556  DE E9		FSUB
 00000558  D8 C9		FMUL ST,ST(1)
 0000055A  D9 1D 00000034 R	FSTP dword ptr [Delta_Right_U]

 00000560  D9 46 10		FLD dword ptr [esi+Vertex_V]
 00000563  D9 41 10		FLD dword ptr [ecx+Vertex_V]
 00000566  D9 15 00000038 R	FST [Right_V]
 0000056C  DE E9		FSUB
 0000056E  DE C9		FMUL
 00000570  D9 1D 0000003C R	FSTP dword ptr [Delta_Right_V]
 00000576			@@CRSend:
 00000576  89 1D 0000000C R	mov [Right_Section_Height],ebx
 0000057C  C3			  ret
 0000057D			CalcRightSection endp

 0000057D = 0000057D		ASM_FILE_END	equ	$

 057D				_TEXT	ENDS

				END
Microsoft (R) Macro Assembler Version 10.00.30319.01	    07/08/11 23:14:43
C:\Projects\REVIVAL\FDS\FILLERS\BIHI.ASM		     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

_DATA  . . . . . . . . . . . . .	32 Bit	 00C0	  DWord	  Public  'DATA'	
_TEXT  . . . . . . . . . . . . .	32 Bit	 057D	  Byte	  Public  'CODE'	


Procedures, parameters, and locals:

                N a m e                 Type     Value    Attr

CalcLeftSection  . . . . . . . .	P Near	 044B	  _TEXT	Length= 0099 Public
  @@CLSend . . . . . . . . . . .	L Near	 04DD	  _TEXT	
CalcRightSection . . . . . . . .	P Near	 04E4	  _TEXT	Length= 0099 Public
  @@CRSend . . . . . . . . . . .	L Near	 0576	  _TEXT	


Symbols:

                N a m e                 Type     Value    Attr

@@InnerLoop  . . . . . . . . . .	L Near	 02D4	  _TEXT	
@@NoOver16 . . . . . . . . . . .	L Near	 02A8	  _TEXT	
@@Update_Left_UVXZ . . . . . . .	L Near	 037A	  _TEXT	
@@Update_Right_UVXZ  . . . . . .	L Near	 03F3	  _TEXT	
@@sort1  . . . . . . . . . . . .	L Near	 0027	  _TEXT	
@@sort2  . . . . . . . . . . . .	L Near	 0031	  _TEXT	
@@sort3  . . . . . . . . . . . .	L Near	 003B	  _TEXT	
ASM_FILE_END . . . . . . . . . .	Number	 057Dh	 
BitMap . . . . . . . . . . . . .	DWord	 0094	  _DATA	
Bottom . . . . . . . . . . . . .	DWord	 00A4	  _DATA	
Delta_Left_X . . . . . . . . . .	DWord	 0088	  _DATA	
Delta_Right_X  . . . . . . . . .	DWord	 0090	  _DATA	
Delta_left_U . . . . . . . . . .	DWord	 0014	  _DATA	
Delta_left_V . . . . . . . . . .	DWord	 001C	  _DATA	
Delta_left_Z . . . . . . . . . .	DWord	 0024	  _DATA	
Delta_right_U  . . . . . . . . .	DWord	 0034	  _DATA	
Delta_right_V  . . . . . . . . .	DWord	 003C	  _DATA	
Delta_right_Z  . . . . . . . . .	DWord	 002C	  _DATA	
FLSNZ  . . . . . . . . . . . . .	L Near	 0167	  _TEXT	
Height . . . . . . . . . . . . .	DWord	 0064	  _DATA	
InnerOuterLoop . . . . . . . . .	L Near	 0260	  _TEXT	
Left_Array . . . . . . . . . . .	DWord	 006C	  _DATA	
Left_Section_Height  . . . . . .	DWord	 0008	  _DATA	
Left_Section . . . . . . . . . .	DWord	 0000	  _DATA	
Left_U . . . . . . . . . . . . .	DWord	 0010	  _DATA	
Left_V . . . . . . . . . . . . .	DWord	 0018	  _DATA	
Left_X . . . . . . . . . . . . .	DWord	 0084	  _DATA	
Left_Z . . . . . . . . . . . . .	DWord	 0020	  _DATA	
LongestOverZero  . . . . . . . .	L Near	 00F0	  _TEXT	
Longest  . . . . . . . . . . . .	DWord	 0068	  _DATA	
Middle . . . . . . . . . . . . .	DWord	 00A0	  _DATA	
One  . . . . . . . . . . . . . .	DWord	 00B0	  _DATA	
OuterLoop  . . . . . . . . . . .	L Near	 0180	  _TEXT	
RIght_Array  . . . . . . . . . .	DWord	 0078	  _DATA	
RevHeight  . . . . . . . . . . .	DWord	 0040	  _DATA	
RevWidth . . . . . . . . . . . .	DWord	 0044	  _DATA	
RightSectionCheck  . . . . . . .	L Near	 03C6	  _TEXT	
Right_Section_Height . . . . . .	DWord	 000C	  _DATA	
Right_Section  . . . . . . . . .	DWord	 0004	  _DATA	
Right_U  . . . . . . . . . . . .	DWord	 0030	  _DATA	
Right_V  . . . . . . . . . . . .	DWord	 0038	  _DATA	
Right_X  . . . . . . . . . . . .	DWord	 008C	  _DATA	
Right_Z  . . . . . . . . . . . .	DWord	 0028	  _DATA	
ScanLine . . . . . . . . . . . .	DWord	 00A8	  _DATA	
Sixteen  . . . . . . . . . . . .	DWord	 00B4	  _DATA	
Sixtyfive  . . . . . . . . . . .	DWord	 00B8	  _DATA	
TEBP . . . . . . . . . . . . . .	DWord	 00AC	  _DATA	
TextureEnd . . . . . . . . . . .	L Near	 0444	  _TEXT	
Top  . . . . . . . . . . . . . .	DWord	 009C	  _DATA	
UpdateValues . . . . . . . . . .	L Near	 0339	  _TEXT	
Vertex_U . . . . . . . . . . . .	Number	 000Ch	 
Vertex_V . . . . . . . . . . . .	Number	 0010h	 
Vertex_X . . . . . . . . . . . .	Number	 0000h	 
Vertex_Y . . . . . . . . . . . .	Number	 0004h	 
Vertex_Z . . . . . . . . . . . .	Number	 0008h	 
Where  . . . . . . . . . . . . .	DWord	 0098	  _DATA	
XWidth . . . . . . . . . . . . .	DWord	 0060	  _DATA	
_P_Texture_16_Size . . . . . . .	DWord	 00BC	  _DATA	Public
_P_Texture_16_ . . . . . . . . .	L Near	 0000	  _TEXT	Public
du . . . . . . . . . . . . . . .	DWord	 0058	  _DATA	
dv . . . . . . . . . . . . . . .	DWord	 005C	  _DATA	
u0 . . . . . . . . . . . . . . .	DWord	 0048	  _DATA	
u1 . . . . . . . . . . . . . . .	DWord	 0050	  _DATA	
v0 . . . . . . . . . . . . . . .	DWord	 004C	  _DATA	
v1 . . . . . . . . . . . . . . .	DWord	 0054	  _DATA	

	   0 Warnings
	   0 Errors
